<?xml version='1.0'?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
<!ENTITY rfc2119 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml">
<!ENTITY rfc4251 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4251.xml">
<!ENTITY rfc4252 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4252.xml">
<!ENTITY rfc4253 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4253.xml">
<!ENTITY rfc5246 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5246.xml">
<!ENTITY rfc6020 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6020.xml">
<!ENTITY rfc6187 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6187.xml">
<!ENTITY rfc6241 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6241.xml">
<!ENTITY rfc6242 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6242.xml">
<!ENTITY rfc6335 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6335.xml">
<!ENTITY rfc6520 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6520.xml">
<!ENTITY rfc6536 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6536.xml">
<!ENTITY rfc6991 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6991.xml">
<!ENTITY rfc7407 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.7407.xml">
]>

<?rfc toc="yes"?>
<?rfc symrefs="yes"?>
<?rfc sortrefs="yes" ?>
<?rfc compact="yes"?>
<?rfc subcompact="no"?>
<?rfc linkmailto="no" ?>
<?rfc editing="no" ?>
<?rfc comments="yes" ?>
<?rfc inline="yes"?>
<?rfc rfcedstyle="yes"?>
<?rfc-ext allow-markup-in-artwork="yes" ?>
<?rfc-ext include-index="no" ?>
<!--<?rfc strict="no"?> -->

<rfc category="std"
     ipr="trust200902"
     docName="draft-ietf-netconf-server-model-latest" >
    <front>
        <title abbrev="NETCONF/RESTCONF Server Config Models">NETCONF Server and RESTCONF Server Configuration Models</title>
        <author initials="K.W." surname="Watsen" fullname="Kent Watsen">
            <organization>Juniper Networks</organization>
            <address>
                <email>kwatsen@juniper.net</email>
            </address>
        </author>
        <author initials="J.S." surname="Schoenwaelder" fullname="Juergen Schoenwaelder">
            <organization>Jacobs University Bremen</organization>
            <address>
                <email>j.schoenwaelder@jacobs-university.de</email>
            </address>
        </author>
        <date/>
        <area>Operations</area>
        <workgroup>NETCONF Working Group</workgroup>
        <abstract>
            <t>This draft defines a NETCONF server configuration data model and a RESTCONF 
            server configuration data model.  These data models enable configuration of 
            the NETCONF and RESTCONF services themselves, including which transports are
            supported, what ports the servers listens on, whether call-home is supported,
            and associated parameters.</t>
        </abstract>
        <note title="Editorial Note (To be removed by RFC Editor)">
          <t>This draft contains many placeholder values that need to be replaced
          with finalized values at the time of publication.  This note summarizes
          all of the substitutions that are needed.  Please note that no other
          RFC Editor instructions are specified anywhere else in this document.</t>

          <t>This document contains references to other drafts in progress, both in
          the Normative References section, as well as in body text throughout.  
          Please update the following references to reflect their final RFC assignments:
            <list style="symbols">
              <t>draft-ietf-netconf-rfc5539bis</t>
              <t>draft-ietf-netconf-restconf</t>
              <t>draft-ietf-netconf-call-home</t>
            </list>
          </t>
          <t>Artwork in this document contains shorthand references to drafts in 
          progress.  Please apply the following replacements:
            <list  style="symbols">
              <t><spanx style="verb">VVVV</spanx> --&gt; the assigned RFC value for this draft</t>
              <t><spanx style="verb">WWWW</spanx> --&gt; the assigned RFC value for draft-ietf-netconf-rfc5539bis</t>
              <t><spanx style="verb">XXXX</spanx> --&gt; the assigned RFC value for draft-ietf-netconf-restconf</t>
              <t><spanx style="verb">YYYY</spanx> --&gt; the assigned RFC value for draft-ietf-netconf-call-home</t>
              <t><spanx style="verb">ZZZZ</spanx> --&gt; the assigned RFC value for draft-thomson-httpbis-cant</t>
            </list>
          </t>
          <t>Artwork in this document contains placeholder values for ports pending IANA assignment
          from "draft-ietf-netconf-call-home".  Please apply the following replacements:
            <list  style="symbols">
              <t><spanx style="verb">7777</spanx> --&gt; the assigned port value for "netconf-ch-ssh"</t>
              <t><spanx style="verb">8888</spanx> --&gt; the assigned port value for "netconf-ch-tls"</t>
              <t><spanx style="verb">9999</spanx> --&gt; the assigned port value for "restconf-ch-tls"</t>
            </list>
          </t>
          <t>Artwork in this document contains placeholder values for the date of publication of this
          draft.  Please apply the following replacement:
            <list  style="symbols">
              <t><spanx style="verb">YYYY-MM-DD</spanx> --&gt; the publication date of this draft</t>
            </list>
          </t>
          <t>The following two Appendix sections are to be removed prior to publication:
            <list  style="symbols">
              <t>Appendix B.  Change Log</t>
              <t>Appendix C.  Open Issues</t>
            </list>
          </t>
        </note>
    </front>
    <middle>

        <section title="Introduction">
            <t>This draft defines a NETCONF <xref target="RFC6241"/> server
            configuration data model and a RESTCONF <xref target="draft-ietf-netconf-restconf"/>
            server configuration data model.  These data models enable configuration of 
            the NETCONF and RESTCONF services themselves, including which transports are
            supported, what ports the servers listens on, whether call-home is supported,
            and associated parameters.</t>
            <section title="Terminology">
              <t>The keywords "MUST", "MUST NOT", "REQUIRED", "SHALL",
              "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY",
              and "OPTIONAL" in this document are to be interpreted as
              described in RFC 2119 <xref target="RFC2119"/>.</t>
            </section>
            <section title="Tree Diagrams">
            <t>A simplified graphical representation of the data models
            is used in this document.  The meaning of the symbols in
            these diagrams is as follows:
              <list style="symbols">
                <t>Brackets "[" and "]" enclose list keys.</t>
                <t>Braces "{" and "}" enclose feature names, and indicate
                that the named feature must be present for the subtree
                to be present.</t>
                <t>Abbreviations before data node names: "rw" means
                configuration (read-write) and "ro" state data 
                (read-only).</t>
                <t>Symbols after data node names: "?" means an optional
                node, "!" means a presence container, and "*" denotes a
                list and leaf-list.</t>
                <t>Parentheses enclose choice and case nodes, and case
                nodes are also marked with a colon (":").</t>
                <t>Ellipsis ("...") stands for contents of subtrees that
                are not shown.</t>
              </list>
            </t>
            </section>
        </section>

        <section title="Objectives">
          <t>The primary purpose of the YANG modules defined herein is
          to enable the configuration of the NETCONF and RESTCONF
          services on a network element.  This scope includes the following 
          objectives:</t>
          <section title="Support all NETCONF and RESTCONF transports">
            <t>The YANG module should support all current NETCONF and RESTCONF
            transports, namely NETCONF over SSH <xref target="RFC6242"/>, 
            NETCONF over TLS <xref target="draft-ietf-netconf-rfc5539bis"/>, and RESTCONF over
            TLS <xref target="draft-ietf-netconf-restconf"/>, and to be 
            extensible to support future transports as necessary.</t>
            <t>Because implementations may not support all transports,
            the module should use YANG &quot;feature&quot; statements
            so that implementations can accurately advertise which
            transports are supported.</t>
          </section>
          <section title="Enable each transport to select which keys to use">
            <t>Servers may have a multiplicity of host-keys or server-certificates
               from which subsets may be selected for specific uses.  For instance,
               a NETCONF server may want to use one set of SSH host-keys when listening
               on port 830, and a different set of SSH host-keys when calling
               home.  The data models provided herein should enable configuration
               of which keys to use on a per-use basis.</t>
          </section>
          <section title="Support authenticating NETCONF/RESTCONF clients certificates">
            <t>When a certificate is used to authenticate a NETCONF or RESTCONF client,
               there is a need to configure the server to know how to authenticate the 
               certificates.  The server should be able to authenticate the client's
               certificate either by using path-validation to a configured trust anchor
               or by matching the client-certificate to one previously configured.</t>
          </section>
          <section title="Support mapping authenticated NETCONF/RESTCONF client certificates to usernames">
            <t>When a client certifcate is used for TLS transport-level authentication,
               the NETCONF/RESTCONF server must be able to derive a username from the 
               authenticated certifcate.  Thus the modules defined herein should enable
               this mapping to be configured.</t>
          </section>
          <section title="Support both Listening for connections and Call Home">
            <t>The NETCONF and RESTCONF protocols were originally defined as having the 
            server opening a port to listen for client connections.  More recently
            the NETCONF working group defined support for call-home 
            (<xref target="draft-ietf-netconf-call-home"/>), enabling the server to
            initiate the connection to the client, for both the NETCONF and RESTCONF
            protocols.  Thus the modules defined herein should enable configuration
            for both listening for connections and calling home.
            Because implementations may not support both listening for
            connections and calling home, YANG &quot;feature&quot; statements
            should be used so that implementation can accurately 
            advertise the connection types it supports.</t>
          </section>
          <section title="For Call Home connections">
            <t>The following objectives only pertain to call home connections.</t>
            <section title="Support more than one northbound application">
              <t>A device may be managed by more than one northbound
              application.  For instance, a deployment may have one
              application for provisioning and another for fault
              monitoring.  Therefore, when it is desired for a device
              to initiate call home connections, it should be able to
              do so to more than one application.</t>
            </section>
            <section title="Support applications having more than one server">
              <t>An application managing a device may implement a 
              high-availability strategy employing a multiplicity of
              active and/or passive servers.  Therefore, when it is
              desired for a device to initiate call home connections,
              it should be able to connect to any of the application's
              servers.</t>
            </section>
            <section title="Support a reconnection strategy">
              <t>Assuming an application has more than one server, then
              it becomes necessary to configure how a device should
              reconnect to the application should it lose its 
              connection to the application's servers.
              Of primary interest is if the device should
              start with first server defined in a user-ordered
              list of servers or with the last server it was connected
              to.  Secondary settings might specify the frequency of
              attempts and number of attempts per server.  Therefore,
              a reconnection strategy should be configurable.</t>
            </section>
            <section title="Support both persistent and periodic connections">
              <t>Applications may vary greatly on how frequently they
              need to interact with a device, how responsive interactions
              with devices need to be, and how many simultaneous connections
              they can support.  Some applications may need a persistent
              connection to devices to optimize real-time interactions, 
              while others prefer periodic interactions in order to minimize
              resource requirements.  Therefore, when it is necessary
              for devices to initiate connections, the type of connection
              desired should be configurable.</t>
            </section>
            <section title="Reconnection strategy for periodic connections">
              <t>The reconnection strategy should apply to both 
              persistent and periodic connections.  How it
              applies to periodic connections becomes clear when
              considering that a periodic "connection" is
              a logical connection to a single server.  That is,
              the periods of unconnectedness are intentional as 
              opposed to due to external reasons.  A periodic
              "connection" should always reconnect to 
              the same server until it is no longer able to, at 
              which time the reconnection strategy guides how to
              connect to another server.</t>
            </section>
            <section anchor="keepalives" title="Keep-alives for persistent connections">
              <t>If a persistent connection is desired, it is the 
              responsibility of the connection initiator to actively
              test the "aliveness" of the connection.  The connection
              initiator must immediately work to reestablish a 
              persistent connection as soon as the connection is
              lost.  How often the connection should be tested is
              driven by application requirements, and therefore
              keep-alive settings should be configurable on a 
              per-application basis.</t>
            </section>
            <section title="Customizations for periodic connections">
              <t>If a periodic connection is desired, it is necessary
              for the device to know how often it should connect.  This
              delay essentially determines how long the 
              application might have to wait to send data to the device.
              This setting does not constrain how often the 
              device must wait to send data to the application, as the
              device should immediately connect to the application 
              whenever it has data to send to it.</t>
              <t>A common communication pattern is that one data
              transmission is many times closely followed by
              another.  For instance, if the device needs to send a
              notification message, there's a high probability that
              it will send another shortly thereafter.  Likewise,
              the application may have a sequence of pending messages
              to send.  Thus, it should be possible for a device to
              hold a connection open until some amount of time of no
              data being transmitted as transpired.</t>
            </section>
          </section>
        </section>

        <section title="The NETCONF Server Configuration Model">
          <section title="Overview">
            <section title="The &quot;session-options&quot; subtree">
              <t>
                <figure>
                  <artwork><![CDATA[
INSERT_TEXT_FROM_FILE(refs/session-options-tree.txt)
]]></artwork>
                </figure>
              </t>
              <t>The above subtree illustrates how the ietf-netconf-server YANG module
              enables configuration of NETCONF session options,
              independent of any transport or connection strategy.
              Please see the YANG module (<xref target="netconf-yang-module"/>)
              for a complete description of these configuration knobs.</t>
            </section>
            <section title="The &quot;listen&quot; subtree">
              <t>
                <figure>
                  <artwork><![CDATA[
INSERT_TEXT_FROM_FILE(refs/listen-tree.txt)
]]></artwork>
                </figure>
              </t>
              <t>The above subtree illustrates how the ietf-netconf-server YANG module
              enables configuration for listening for remote connections,
              as described in <xref target="RFC6242"/>.  Feature statements are used to limit both
              if listening is supported at all as well as for which transports.
              If listening for connections is supported, then the model 
              enables configuring a list of listening endpoints, each 
              configured with a
              user-specified name (the key field), the transport to use 
              (i.e. SSH, TLS), and the IP address and port to listen on.
              The port field is optional, defaulting to the transport-specific
              port when not configured.
              Please see the YANG module (<xref target="netconf-yang-module"/>)
              for a complete description of these configuration knobs.</t>
            </section>
            <section title="The &quot;call-home&quot; subtree">
              <t>
                <figure>
                  <artwork><![CDATA[
INSERT_TEXT_FROM_FILE(refs/call-home-tree.txt)
]]></artwork>
                </figure>
              </t>
              <t>The above subtree illustrates how the ietf-netconf-server YANG module
              enables configuration for call home, as described in 
              <xref target="draft-ietf-netconf-call-home"/>.  Feature 
              statements are used to limit both if call-home is supported
              at all as well as for which transports, if it is.  If call-home
              is supported, then the model supports configuring a list of
              applications to connect to.  Each application is configured
              with a user-specified name (the key field), the transport to
              be used (i.e. SSH, TLS), and a list of remote endpoints, each
              having a name, an IP address, and an optional port.  Additionally,
              the configuration for each remote application indicates the
              connection-type (persistent vs. periodic) and associated 
              parameters, as well as the reconnection strategy to use.
              Please see the YANG module (<xref target="netconf-yang-module"/>)
              for a complete description of these configuration knobs.</t>

            </section>
            <section title="The &quot;ssh&quot; subtree">
              <t>
                <figure>
                  <artwork><![CDATA[
INSERT_TEXT_FROM_FILE(refs/ssh-tree.txt)
]]></artwork>
                </figure>
              </t>
              <t>The above subtree illustrates how the ietf-netconf-server YANG module
              enables some SSH configuration independent of if the NETCONF
              server is listening or calling home.  Specifically, when
              RFC 6187 is supported, this data model provides an ability
              to configure how client-certificates are authenticated.
              Please see the YANG module (<xref target="netconf-yang-module"/>)
              for a complete description of these configuration knobs.</t>
            </section>

            <section title="The &quot;tls&quot; subtree">
              <t>
                <figure>
                  <artwork><![CDATA[
INSERT_TEXT_FROM_FILE(refs/tls-tree.txt)
]]></artwork>
                </figure>
              </t>
              <t>The above subtree illustrates how the ietf-netconf-server YANG module
              enables TLS configuration independent of if the NETCONF 
              server is listening or calling home.  Specifically, this 
              data-model provides 1) an ability to configure how 
              client-certificates are authenticated and 2) how authenticated
              client-certificates are mapped to NETCONF user names.
              Please see the YANG module (<xref target="netconf-yang-module"/>)
              for a complete description of these configuration knobs.</t>
            </section>
          </section>


          <section title="YANG Module" anchor="netconf-yang-module">
            <t>This YANG module imports YANG types from <xref
            target="RFC6991"/> and <xref target="RFC7407"/>.</t>
            <t>
            <figure>
              <!--<preamble>The YANG Module</preamble>-->
              <artwork><![CDATA[
<CODE BEGINS> file "ietf-netconf-server@YYYY-MM-DD.yang"

INSERT_TEXT_FROM_FILE(ietf-netconf-server@YYYY-MM-DD.yang)

<CODE ENDS>
]]></artwork>
            </figure>
            </t>
          </section>
        </section>


        <section title="The RESTCONF Server Configuration Model">
          <section title="Overview">
            <section title="The &quot;listen&quot; subtree">
              <t>
                <figure>
                  <artwork><![CDATA[
INSERT_TEXT_FROM_FILE(refs/restconf-listen-tree.txt)
]]></artwork>
                </figure>
              </t>
              <t>The above subtree illustrates how the ietf-restconf-server YANG module
              enables configuration for listening for remote connections,
              as described in <xref target="draft-ietf-netconf-restconf"/>.
              Feature statements are used to limit both
              if listening is supported at all as well as for which transports.
              If listening for connections is supported, then the model 
              enables configuring a list of listening endpoints, each 
              configured with a
              user-specified name (the key field), the transport to use 
              (i.e. TLS), and the IP address and port to listen on.
              The port field is optional, defaulting to the transport-specific
              port when not configured.
              Please see the YANG module (<xref target="restconf-yang-module"/>)
              for a complete description of these configuration knobs.</t>
            </section>
            <section title="The &quot;call-home&quot; subtree">
              <t>
                <figure>
                  <artwork><![CDATA[
INSERT_TEXT_FROM_FILE(refs/restconf-call-home-tree.txt)
]]></artwork>
                </figure>
              </t>
              <t>The above subtree illustrates how the ietf-restconf-server YANG module
              enables configuration for call home, as described in 
              <xref target="draft-ietf-netconf-call-home"/>.  Feature 
              statements are used to limit both if call-home is supported
              at all as well as for which transports, if it is.  If call-home
              is supported, then the model supports configuring a list of
              applications to connect to.  Each application is configured
              with a user-specified name (the key field), the transport to
              be used (i.e. TLS), and a list of remote endpoints, each
              having a name, an IP address, and an optional port.  Additionally,
              the configuration for each remote application indicates the
              connection-type (persistent vs. periodic) and associated 
              parameters, as well as the reconnection strategy to use.
              Please see the YANG module (<xref target="restconf-yang-module"/>)
              for a complete description of these configuration knobs.</t>
            </section>
            <section title="The &quot;client-cert-auth&quot; subtree">
              <t>
                <figure>
                  <artwork><![CDATA[
INSERT_TEXT_FROM_FILE(refs/restconf-client-cert-auth-tree.txt)
]]></artwork>
                </figure>
              </t>
              <t>The above subtree illustrates how the ietf-restconf-server YANG module
              enables configuration of client-certificate authentication.  Specifically,
              this data-model provides 1) an ability to configure how client-certificates
              are authenticated and 2) how authenticated client-certificates are mapped
              to RESTCONF user names.  Please see the YANG module 
              (<xref target="restconf-yang-module"/>) for a complete description of 
              these configuration knobs.</t>
            </section>

          </section>

          <section title="YANG Module" anchor="restconf-yang-module">
            <t>This YANG module imports YANG types from <xref
            target="RFC6991"/> and <xref target="RFC7407"/>.</t>
            <t>
            <figure>
              <artwork><![CDATA[
<CODE BEGINS> file "ietf-restconf-server@YYYY-MM-DD.yang"

INSERT_TEXT_FROM_FILE(ietf-restconf-server@YYYY-MM-DD.yang)

<CODE ENDS>
]]></artwork>
            </figure>
            </t>
          </section>
        </section>

        <section title="Implementation strategy for keep-alives">
          <t>One of the objectives listed above, Keep-alives for persistent
          connections <xref target="keepalives"/>, indicates a need
          for a "keep-alive" mechanism.  This section specifies how the
          keep-alive mechanism is to be implemented for both the
          SSH and TLS transports.</t>

          <t>Both SSH and TLS have the ability to support keep-alives securely.
          Using the strategies listed below, the keep-alive messages are sent
          inside the encrypted tunnel and thus immune to attack.</t>

          <section title="Keep-alives for SSH">
            <t>The SSH keep-alive solution that is expected to be used
            is ubiquitous in practice, though never being explicitly defined
            in an RFC.  The strategy used is to purposely send a malformed
            request message with a flag set to ensure a response.  More
            specifically, per section 4 of <xref target="RFC4253"/>, either 
            SSH peer can send a SSH_MSG_GLOBAL_REQUEST message with "want 
            reply" set to '1' and that, if there is an error, will get back
            a SSH_MSG_REQUEST_FAILURE response.  Similarly, section 5 of 
            <xref target="RFC4253"/> says that either SSH peer can send a
            SSH_MSG_CHANNEL_REQUEST message with "want reply" set to '1' 
            and that, if there is an error, will get back a 
            SSH_MSG_CHANNEL_FAILURE response.</t>

            <t>To ensure that the request will fail, current implementations
            of this keep-alive strategy (e.g. OpenSSH's `sshd` server) send an
            invalid "request name" or "request type", respectively.  Abiding 
            to the extensibility guidelines specified in Section 6
            of <xref target="RFC4251"/>, these implementations use the 
            "name@domain".  For instance, when configured to send keep-alives,
            OpenSSH sends the string "keepalive@openssh.com".  In order to
            remain compatible with existing implementations, this draft does
            not require a specific "request name" or "request type" string
            be used, implementations are free to pick values of their choosing.</t>
          </section>

          <section title="Keep-alives for TLS">
            <t>The TLS keep-alive solution that is expected to be used is
            defined in <xref target="RFC6520"/>.  
            This solution allows both peers to advertise if they can
            receive heartbeat request messages from its peer.  
            For standard TLS connections, devices SHOULD
            advertise "peer_allowed_to_send", as per <xref target="RFC6520"/>.
            This advertisement is not a "MUST" in order to grandfather
            existing NETCONF/RESTCONF over TLS implementations.
            For NETCONF Call Home or RESTCONF Call Home, the network management
            system MUST advertise "peer_allowed_to_send" per
            <xref target="RFC6520"/>.  This is a "MUST" so as to ensure
            devices can depend on it always being there for call home
            connections, which is when keep-alives are needed the most.</t>
          </section>

        </section>

        <section title="Security Considerations">
            <t>The YANG modules defined in this memo are designed to be
            accessed via the NETCONF protocol <xref target="RFC6241"/>.  
            Authorization for access to specific portions of conceptual
            data and operations within this module is provided by the
            NETCONF access control model (NACM) <xref target="RFC6536"/>.</t>

            <t>There are a number of data nodes defined in the 
            "ietf-netconf-server" YANG module which are readable and/or 
            writable that may be considered sensitive or vulnerable in some 
            network environments.  Write and read operations to
            these data nodes can have a negative effect on network
            operations.  It is thus important to control write
            and read access to these data nodes.  Below are the 
            data nodes and their sensitivity/vulnerability.</t>

            <t>netconf-server/tls/client-auth/trusted-ca-certs:
            <list style="symbols">
              <t>This container contains certificates that a NETCONF server
              is to use as trust anchors for authenticating X.509-based
              client certificates.  Write access to this node is
              protected using an nacm:default-deny-write statement.</t>
            </list>
            </t>

            <t>netconf-server/tls/client-auth/trusted-client-certs:
            <list style="symbols">
              <t>This container contains certificates that a NETCONF server
              is to trust directly when authenticating X.509-based
              client certificates.  Write access to this node is
              protected using an nacm:default-deny-write statement.</t>
            </list>
            </t>

            <t>restconf-server/tls/client-auth/trusted-ca-certs:
            <list style="symbols">
              <t>This container contains certificates that a RESTCONF server
              is to use as trust anchors for authenticating X.509-based
              client certificates.  Write access to this node is
              protected using an nacm:default-deny-write statement.</t>
            </list>
            </t>

            <t>restconf-server/tls/client-auth/trusted-client-certs:
            <list style="symbols">
              <t>This container contains certificates that a RESTCONF server
              is to trust directly when authenticating X.509-based
              client certificates.  Write access to this node is
              protected using an nacm:default-deny-write statement.</t>
            </list>
            </t>

        </section>

        <section title="IANA Considerations">
          <t>This document registers two URIs in the IETF XML 
          registry <xref target="RFC2119"/>.  Following the format in 
          <xref target="RFC3688"/>, the following registrations are
          requested:</t>
          <t>
            <figure>
                <artwork><![CDATA[
   URI: urn:ietf:params:xml:ns:yang:ietf-netconf-server
   Registrant Contact: The NETCONF WG of the IETF.
   XML: N/A, the requested URI is an XML namespace.

   URI: urn:ietf:params:xml:ns:yang:ietf-restconf-server
   Registrant Contact: The NETCONF WG of the IETF.
   XML: N/A, the requested URI is an XML namespace.
]]></artwork>
            </figure>
          </t>
          <t>This document registers two YANG modules in the
          YANG Module Names registry <xref target="RFC6020"/>.
          Following the format in <xref target="RFC6020"/>, the
          the following registrations are requested:</t>
          <t>
            <figure>
                <artwork><![CDATA[
   name:         ietf-netconf-server
   namespace:    urn:ietf:params:xml:ns:yang:ietf-netconf-server
   prefix:       ncserver
   reference:    RFC VVVV

   name:         ietf-restconf-server
   namespace:    urn:ietf:params:xml:ns:yang:ietf-restconf-server
   prefix:       rcserver
   reference:    RFC VVVV
]]></artwork>
            </figure>
          </t>
        </section>

        <section title="Other Considerations">
            <t>The YANG modules define herein do not themselves support
            virtual routing and forwarding (VRF).  It is expected that
            external modules will augment in VRF designations when needed.</t>
        </section>

        <section title="Acknowledgements">
          <t>The authors would like to thank for following for
          lively discussions on list and in the halls (ordered
          by last name): Andy Bierman, Martin Bjorklund, Benoit Claise,
          Mehmet Ersue, David Lamparter, Alan Luchuk, Ladislav Lhotka,
          Radek Krejci, Tom Petch, Phil Shafer, and Bert Wijnen.</t>
         <t>
           Juergen Schoenwaelder and was partly funded by Flamingo, a
           Network of Excellence project (ICT-318488) supported by the
           European Commission under its Seventh Framework Programme.
         </t>
       </section>

    </middle>

    <back>
      <references title="Normative References">
          &rfc2119;
          &rfc4251;
          &rfc4253;
          &rfc6020;
          &rfc6187;
          &rfc6241;
          &rfc6242;
          &rfc6520;
          &rfc6536;
          &rfc6991;
          &rfc7407;
        <reference anchor='draft-ietf-netconf-rfc5539bis'>
          <front>
            <title>
              Using the NETCONF Protocol over Transport Layer
              Security (TLS)
            </title>
            <author initials='M' surname='Badra' 
               fullname='Mohamad Badra'>
              <organization>LIMOS Laboratory</organization>
            </author>
            <author initials='A' surname='Luchuk'
               fullname='Alan Luchuk'>
              <organization>SNMP Research, Inc.</organization>
            </author>
            <author initials='J' surname='Schönwälder'
               fullname='Jürgen Schönwälder'>
              <organization>Jacobs University</organization>
            </author>
            <date year='2014' />
          </front>
          <seriesInfo name='Internet-Draft'
                 value='draft-ietf-netconf-rfc5539bis-06' />
        </reference>
         <reference anchor='draft-ietf-netconf-call-home'>
           <front>
             <title>
               NETCONF Call Home and RESTCONF Call Home
             </title>
             <author initials='K.W.' surname='Watsen'
                fullname='Kent Watsen'>
               <organization>Juniper Networks</organization>
             </author>
             <date year='2014' />
           </front>
           <seriesInfo name='Internet-Draft'
                  value='draft-ieft-netconf-call-home-02' />
         </reference>
         <reference anchor='draft-ietf-netconf-restconf'>
           <front>
             <title>RESTCONF Protocol</title>
             <author initials='A.B.' surname='Bierman'
                fullname='Andy Bierman'>
               <organization>YumaWorks</organization>
             </author>
             <author initials='M' surname='Bjorklund' 
                fullname='Martin Bjorklund'>
               <organization>Tail-f Systems</organization>
             </author>
             <author initials='K.W.' surname='Watsen'
                fullname='Kent Watsen'>
               <organization>Juniper Networks</organization>
             </author>
             <date year='2014' />
           </front>
           <seriesInfo name='Internet-Draft'
                  value='draft-ieft-netconf-restconf-04' />
        </reference>
      </references>
      <references title="Informative References">

        <reference anchor="RFC3688">
          <front>
            <title>The IETF XML Registry</title>
            <author initials="M.M." surname="Mealling"
                    fullname="Michael Mealling">
              <organization>VeriSign Inc.</organization>
            </author>
            <date month="January" year="2004" />
          </front>
          <seriesInfo name="BCP" value="81" />
          <seriesInfo name="RFC" value="3688"/>
        </reference>
      </references>
      
      <section title="Examples">
        <section title="NETCONF Configuration using SSH Transport">
          <t>
            The following example illustrates the &lt;get&gt; response from a NETCONF server
            that only supports SSH, both listening for incoming connections as well as 
            calling home to a single application having two endpoints. 
          </t>
          <t>
            <figure>
              <artwork><![CDATA[
INSERT_TEXT_FROM_FILE(refs/ex-ssh.xml)
]]></artwork>
            </figure>
          </t>
        </section>
  
        <section title="NETCONF Configuration using TLS Transport">
          <t>
            The following example illustrates the &lt;get&gt; response from a NETCONF server
            that only supports TLS, both listening for incoming connections as well as 
            calling home to a single application having two endpoints.  Please note also
            the configurations for authenticating client certificates and mappings
            authenticated certificates to NETCONF user names.
          </t>
          <t>
            <figure>
              <artwork><![CDATA[
INSERT_TEXT_FROM_FILE(refs/ex-tls.xml)
]]></artwork>
            </figure>
          </t>
        </section>
   
        <section title="RESTCONF Configuration using TLS Transport">
          <t>
            The following example illustrates the &lt;get&gt; response from a RESTCONF server
            that only supports TLS, both listening for incoming connections as well as 
            calling home to a single application having two endpoints.
          </t>
          <t>
            <figure>
              <artwork><![CDATA[
INSERT_TEXT_FROM_FILE(refs/ex-restconf-tls.xml)
]]></artwork>
            </figure>
          </t>
        </section>
  
      </section>

      <section title="Change Log">
        <section title="00 to 01">
          <t>
            <list style="symbols">
              <t>Restructured document so it flows better</t>
              <t>Added trusted-ca-certs and trusted-client-certs
                 objects into the ietf-system-tls-auth module</t>
            </list>
          </t>
        </section>
        <section title="01 to 02">
          <t>
            <list style="symbols">
              <t>removed the "one-to-many" construct</t>
              <t>removed "address" as a key field</t>
              <t>removed "network-manager" terminology</t>
              <t>moved open issues to github issues</t>
              <t>brought TLS client auth back into model</t>
            </list>
          </t>
        </section>
        <section title="02 to 03">
          <t>
            <list style="symbols">
              <t>fixed tree diagrams and surrounding text</t>
            </list>
          </t>
        </section>
        <section title="03 to 04">
          <t>
            <list style="symbols">
              <t>reduced the number of grouping statements</t>
              <t>removed psk-maps and associated feature statements</t>
              <t>added ability for listen/call-home instances to specify
                 which host-keys/certificates (of all listed) to use</t>
              <t>clarified that last-connected should span reboots</t>
              <t>added missing "objectives" for selecting which keys to use,
                 authenticating client-certificates, and mapping authenticated
                 client-certificates to usernames</t>
              <t>clarified indirect client certificate authentication</t>
              <t>added keep-alive configuration for listen connections</t>
              <t>added global-level NETCONF session parameters</t>
            </list>
          </t>
        </section>
        <section title="04 to 05">
          <t>
            <list style="symbols">
              <t>Removed all refs to the old ietf-system-tls-auth module</t>
              <t>Removed YANG 1.1 style if-feature statements (loss some expressiveness)</t>
              <t>Removed the read-only (config false) lists of SSH host-keys and TLS certs</t>
              <t>Added an if-feature around session-options container</t>
              <t>Added ability to configure trust-anchors for SSH X.509 client certs</t>
              <t>Now imports by revision, per best practice</t>
              <t>Added support for RESTCONF server</t>
              <t>Added RFC Editor instructions</t>
            </list>
          </t>
        </section>
        <section title="05 to 06">
          <t>
            <list style="symbols">
              <t>Removed feature statement on the session-options container (issue #21).</t>
              <t>Added NACM statements to YANG modules for sensitive nodes (issue #24).</t>
              <t>Fixed default RESTCONF server port value to be 443 (issue #26).</t>
              <t>Added client-cert-auth subtree to ietf-restconf-server module (issue #27).</t>
              <t>Updated draft-ietf-netmod-snmp-cfg reference to RFC 7407 (issue #28).</t>
              <t>Added description statements for groupings (issue #29).</t>
              <t>Added description for braces to tree diagram section (issue #30).</t>
            </list>
          </t>
        </section>
      </section>
      <section title="Open Issues">
        <t>Please see: https://github.com/netconf-wg/server-model/issues.</t>
      </section>
    </back>
</rfc>

